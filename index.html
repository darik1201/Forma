<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>–î–æ–≥–æ–≤–æ—Ä –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –æ—Ç–¥—ã—Ö–∞</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <form id="feedbackForm" novalidate>
        <h1>–õ–ê–ì–ï–†–¨ 2025</h1>

        <div id="formFields">
            <h2>üìù –î–∞–Ω–Ω—ã–µ –†–æ–¥–∏—Ç–µ–ª—è</h2>

            <label for="parentsname">–§–ò–û —Ä–æ–¥–∏—Ç–µ–ª—è</label>
            <input type="text" id="parentsname" name="parentsname" placeholder="–ò–≤–∞–Ω–æ–≤ –ê–Ω—Ç–æ–Ω –ò–≤–∞–Ω–æ–≤–∏—á" required>

            <label for="passport">–°–µ—Ä–∏—è –∏ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞</label>
            <input type="text" id="passport" name="passport" placeholder="0000 000000" required>

            <label for="passportinfo">–ö–µ–º –∏ –∫–æ–≥–¥–∞ –≤—ã–¥–∞–Ω –ø–∞—Å–ø–æ—Ä—Ç</label>
            <input type="text" id="passportinfo" name="passportinfo"
                placeholder="–£–§–ú–° –†–æ—Å—Å–∏–∏ –ø–æ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª. 26.12.2008" required>

            <label for="passportadres">–ê–¥—Ä–µ—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</label>
            <input type="text" id="passportadres" name="passportadres"
                placeholder="–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª., –≥. –ò–≤–∞–Ω–æ–≤–æ, —É–ª –ü–∞—Ä–∏–∂—Å–∫–æ–π –ö–æ–º—É–Ω–Ω—ã, –¥. 25 –∫–≤ 17" required>

            <h2>üë∂ –î–∞–Ω–Ω—ã–µ —Ä–µ–±–µ–Ω–∫–∞</h2>
            <label for="childrenname">–§–ò–û —Ä–µ–±–µ–Ω–∫–∞</label>
            <input type="text" id="childrenname" name="childrenname" placeholder="–ò–≤–∞–Ω–æ–≤ –ê–Ω—Ç–æ–Ω –ò–≤–∞–Ω–æ–≤–∏—á" required>

            <label for="birthday">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è —Ä–µ–±–µ–Ω–∫–∞</label>
            <input type="text" id="birthday" name="birthday" placeholder="10 —è–Ω–≤–∞—Ä—è 2005" required>

            <label for="documentchildren">–ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ä–µ–±–µ–Ω–∫–∞</label>
            <input type="text" id="documentchildren" name="documentchildren"
                placeholder="–ü–∞—Å–ø–æ—Ä—Ç –†–§ –∏–ª–∏ –°–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–æ–∂–¥–µ–Ω–∏–∏" required>

            <h2>üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞</h2>
            <div class="file-upload-wrapper">
                <label for="documentscan" class="file-upload-label">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</label>
                <span class="file-name">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</span>
                <input type="file" id="documentscan" name="documentscan" required>
            </div>

            <h2>üöå –í—ã–µ–∑–¥</h2>
            <label for="option">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–µ–∑–¥–∞:</label>
            <select id="option" name="option" required>
                <option value="" disabled selected>-- –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ --</option>
                <option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞</option>
                <option value="–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥">–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥</option>
                <option value="–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ">–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ</option>
            </select>

            <label for="number">–ú–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω</label>
            <input type="tel" id="number" name="number" placeholder="+79999999999" pattern="(^\+7\d{10}$|^8\d{10}$)" required>

            <label for="email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞</label>
            <input type="email" id="email" name="email" placeholder="example@example.com" required>

            <button type="submit" style="background: #27ae60; width: 100%; padding: 18px;">üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        </div>
    </form>

    <div id="status">
        <div class="status-content">
            <span class="status-icon"></span>
            <div class="message"></div>
        </div>
    </div>

    <script>
        document.addEventListener('keydown', function (event) {
        if (event.key === 'Enter') {
            event.preventDefault(); 
        }
        });
        const checkpromo = document.getElementById('promoCode');
        const formFields = document.getElementById('formFields');
        const statusElement = document.getElementById('status');
        const statusIcon = document.querySelector('.status-icon');
        const statusMessage = document.querySelector('.message');
        const feedbackForm = document.getElementById('feedbackForm');
        document.getElementById('documentscan').addEventListener('change', function (e) {
            const fileName = e.target.files[0]?.name || '–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω';
            document.querySelector('.file-name').textContent = fileName;
        });

        feedbackForm.addEventListener('submit', async function (event) {
            event.preventDefault();
            const requiredFields = [
        'parentsname', 'passport', 'passportinfo', 
        'passportadres', 'childrenname', 'birthday',
        'documentchildren', 'option', 'number', 'email'
    ];
    
    let hasErrors = false;

    requiredFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (!field.value.trim()) {
            field.style.borderColor = '#c62828';
            hasErrors = true;
        } else {
            field.style.borderColor = '#bdc3c7';
        }
    });
    const fileInput = document.getElementById('documentscan');
    if (!fileInput.files[0]) {
        fileInput.parentElement.style.border = '2px solid #c62828';
        hasErrors = true;
    } else {
        fileInput.parentElement.style.border = 'none';
    }
    const phoneField = document.getElementById('number');
    if (!/^\+7\d{10}$|^8\d{10}$/.test(phoneField.value)) {
        phoneField.style.borderColor = '#c62828';
        hasErrors = true;
    }

    if (hasErrors) {
        statusElement.classList.add('active');
        statusIcon.textContent = '‚ùå';
        statusMessage.innerHTML = '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ';
        setTimeout(() => statusElement.classList.remove('active'), 3000);
        return;
    }
    statusElement.classList.add('active');
    statusIcon.textContent = '‚è≥';
    statusMessage.innerHTML = '–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö... \n\n –ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –≤—ã—Å–≤–µ—Ç–∏—Ç—Å—è —Å—Ç–∞—Ç—É—Å "–ì–æ—Ç–æ–≤–æ"';
            
            try {
                const fileInput = document.getElementById('documentscan');
                const file = fileInput.files[0];
                let fileData = null;

                if (file) {
                    const reader = new FileReader();
                    fileData = await new Promise((resolve, reject) => {
                        reader.onload = e => resolve(e.target.result.split(',')[1]);
                        reader.onerror = reject;
                        reader.readAsDataURL(file);
                    });
                }

                const formData = {
                    parentsname: document.getElementById('parentsname').value,
                    passport: document.getElementById('passport').value,
                    passportinfo: document.getElementById('passportinfo').value,
                    passportadres: document.getElementById('passportadres').value,
                    childrenname: document.getElementById('childrenname').value,
                    birthday: document.getElementById('birthday').value,
                    documentchildren: document.getElementById('documentchildren').value,
                    option: document.getElementById('option').value,
                    number: document.getElementById('number').value,
                    email: document.getElementById('email').value,
                    fileData: {
                        name: file?.name || '',
                        type: file?.type || '',
                        data: fileData || ''
                    }
                };
    
                const response = await fetch('YOUR-URL-SCRIPT', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                await response.text();
                statusIcon.textContent = '‚úÖ';
                statusMessage.innerHTML = `–ì–æ—Ç–æ–≤–æ!<br>–î–æ–≥–æ–≤–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É ${formData.email}`;
                feedbackForm.reset();
                disableFormFields();

                setTimeout(() => {
                    statusElement.classList.remove('active');
                }, 5000);

            } catch (error) {
                statusIcon.textContent = '‚ùå';
                statusMessage.innerHTML = `–û—à–∏–±–∫–∞: ${error.message}<br>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑`;
            }
        });

        disableFormFields();
    </script>
</body>

</html>