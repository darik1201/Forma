# **Договор на организацию отдыха в лагере**  

Это веб-форма для оформления договора на отдых ребенка в лагере. Она автоматически создает договор, сохраняет данные в Google Таблицу и отправляет документы на email родителя и администратора.
![image](https://github.com/user-attachments/assets/1d22430a-1925-4d1b-8385-2abc8d7327c8)

## **Функционал**  
 **Сбор данных**:  
- ФИО и паспортные данные родителя  
- ФИО и дата рождения ребенка  
- Номер документа ребенка  
- Контактные данные (телефон и email)  
- Вариант выезда (Москва, Калининград, самостоятельно)  
- Загрузка скана документа  

 **Автоматическая обработка**:  
- Генерация уникального номера договора (формат: `Т001М`, `Т002К`, `Т003С`)  
- Создание двух версий договора из шаблонов Google Docs  
- Расчет стоимости в зависимости от города выезда  
- Сохранение всех данных в Google Таблицу  

 **Отправка документов**:  
- Формирование PDF из договоров  
- Отправка на email родителя:  
  - Основной договор  
  - Дополнительные документы  
- Отправка администратору:  
  - Все договоры  
  - Скан документа  
  - Данные клиента  

## **Технологии**  
- **Frontend**: HTML5, CSS3, JavaScript  
- **Backend**: Google Apps Script  
- **Хранение данных**: Google Sheets  
- **Документы**: Google Docs → PDF  
- **Файлы**: Google Drive  

## **Как это работает?**  
1. Пользователь заполняет форму на сайте  
2. Данные отправляются в Google Apps Script (`doPost`)  
3. Скрипт:  
   - Сохраняет скан документа в Google Drive  
   - Генерирует номер договора  
   - Записывает данные в Google Таблицу  
   - Создает 2 версии договора из шаблонов  
   - Конвертирует в PDF  
   - Отправляет письма клиенту и администратору  

## **Настройка**  
1. **Google Drive**:  
   - Создайте папку для сканов (указать ID в `folderId`)  
   - Подготовьте шаблоны договоров (указать их ID)  

2. **Google Sheets**:  
   - Создайте таблицу с колонками:  
     ```
     ФИО родителя, Паспорт, Кем выдан, Адрес, ФИО ребенка, Дата рождения, Документ ребенка, Ссылка на скан, Город, Телефон, Email, Номер договора, Дата
     ```

3. **Google Apps Script**:  
   - Разверните скрипт  
   - Настройте триггер `doPost`  
   - Дайте права на:  
     - Google Drive  
     - Gmail  
     - Google Docs  

4. **Интеграция с формой**:  
   - В форме укажите URL скрипта как endpoint для отправки данных  
